<!DOCTYPE html>
<html lang="en-us">
    <head>
	<meta charset="UTF-8">
	<link rel="stylesheet" href="test2.css">
	<script src="//ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    </head>
    <body>
	<p>
	    Current BTC Market Price:<br>
	    &#x243; = <span id="btc-usd"></span><br>
	    Updated <span id="timestamp"></span>
	</p>

	<div class="Rtable Rtable--5cols Rtable--collapse">
	    <div class="Rtable-cell Rtable-cell--head header">Level</div>
	    <div class="Rtable-cell header">Donation</div>
	    <div class="Rtable-cell header">People/ Level</div>
	    <div class="Rtable-cell header">BTC</div>
	    <div class="Rtable-cell Rtable-cell--foot header">In USD</div>
	    
	    <div class="Rtable-cell Rtable-cell--head"><span class="label">Level: </span>1</div>
	    <div class="Rtable-cell"><span class="label">Donation: </span>&#x243;0.05</div>
	    <div class="Rtable-cell"><span class="label">People/Level: </span>2</div>
	    <div class="Rtable-cell"><span class="label">BTC: </span>&#x243;<span class="btc1">0.10</span></div>
	    <div class="Rtable-cell Rtable-cell--foot"><span class="label">In USD: </span>$<span class="usd1"></span></div>
	    
	    <div class="Rtable-cell Rtable-cell--head"><span class="label">Level: </span>2</div>
	    <div class="Rtable-cell"><span class="label">Donation: </span>&#x243;0.05</div>
	    <div class="Rtable-cell"><span class="label">People/Level: </span>4</div>
	    <div class="Rtable-cell"><span class="label">BTC: </span>&#x243;<span class="btc2">0.20</span></div>
	    <div class="Rtable-cell Rtable-cell--foot"><span class="label">In USD: </span>$<span class="usd2"></span></div>
	    
	    <div class="Rtable-cell Rtable-cell--head"><span class="label">Level: </span>3</div>
	    <div class="Rtable-cell"><span class="label">Donation: </span>&#x243;0.10</div>
	    <div class="Rtable-cell"><span class="label">People/Level: </span>8</div>
	    <div class="Rtable-cell"><span class="label">BTC: </span>&#x243;<span class="btc3">0.80</span></div>
	    <div class="Rtable-cell Rtable-cell--foot"><span class="label">In USD: </span>$<span class="usd3"></span></div>
	    
	    <div class="Rtable-cell Rtable-cell--head"><span class="label">Level: </span>4</div>
	    <div class="Rtable-cell"><span class="label">Donation: </span>&#x243;0.20</div>
	    <div class="Rtable-cell"><span class="label">People/Level: </span>16</div>
	    <div class="Rtable-cell"><span class="label">BTC: </span>&#x243;<span class="btc4">3.20</span></div>
	    <div class="Rtable-cell Rtable-cell--foot"><span class="label">In USD: </span>$<span class="usd4"></span></div>
	    
	    <div class="Rtable-cell Rtable-cell--head"><span class="label">Level: </span>5</div>
	    <div class="Rtable-cell"><span class="label">Donation: </span>&#x243;0.50</div>
	    <div class="Rtable-cell"><span class="label">People/Level: </span>32</div>
	    <div class="Rtable-cell"><span class="label">BTC: </span>&#x243;<span class="btc5">16.00</span></div>
	    <div class="Rtable-cell Rtable-cell--foot"><span class="label">In USD: </span>$<span class="usd5"></span></div>
	    
	    <div class="Rtable-cell Rtable-cell--head"><span class="label">Level: </span>6</div>
	    <div class="Rtable-cell"><span class="label">Donation: </span>&#x243;1.00</div>
	    <div class="Rtable-cell"><span class="label">People/Level: </span>64</div>
	    <div class="Rtable-cell"><span class="label">BTC: </span>&#x243;<span class="btc6">64.00</span></div>
	    <div class="Rtable-cell Rtable-cell--foot"><span class="label">In USD: </span>$<span class="usd6"></span></div>
	    
	    <div class="Rtable-cell Rtable-cell--head footer">Total</div>
	    <div class="Rtable-cell footer"><span class="label">Donation: </span>&#x243;1.90</div>
	    <div class="Rtable-cell footer"><span class="label">People/Level: </span>126</div>
	    <div class="Rtable-cell footer"><span class="label">BTC: </span>&#x243;<span class="btc-total">84.30</span></div>
	    <div class="Rtable-cell Rtable-cell--foot footer"><span class="label">In USD: </span>$<span class="usd-total"></span></div>
	</div>
	
	<p>
	    That's right!<br>
	    The current income potential here is $<span class="usd-total"></span>
	</p>
	<script>
	 // Load bitcoin value from KRAKEN
	 // Address: https://api.kraken.com/0/public/Ticker?pair=XBTUSD
	 // 
	 function update() {
	     $.ajax({url: "https://api.kraken.com/0/public/Ticker?pair=XBTUSD"
	     }).done(
		 // handle a successful response
		 function(data) {
		     update_values(data);
		 });

	     // handle a non-successful response

	     setTimeout(update, 30000);
	 };

	 function update_values(data) {
	     var value = data.result.XXBTZUSD.c["0"];
	     $('#btc-usd').html("$" + roundToTwo(value) + " USD");
	     var result = parseFloat($('.btc1').text()) * parseFloat(value);
	     $('.usd1').html(numberWithCommas(roundToTwo(result)));
	     var result = parseFloat($('.btc2').text()) * parseFloat(value);
	     $('.usd2').html(numberWithCommas(roundToTwo(result)));
	     var result = parseFloat($('.btc3').text()) * parseFloat(value);
	     $('.usd3').html(numberWithCommas(roundToTwo(result)));
	     var result = parseFloat($('.btc4').text()) * parseFloat(value);
	     $('.usd4').html(numberWithCommas(roundToTwo(result)));
	     var result = parseFloat($('.btc5').text()) * parseFloat(value);
	     $('.usd5').html(numberWithCommas(roundToTwo(result)));
	     var result = parseFloat($('.btc6').text()) * parseFloat(value);
	     $('.usd6').html(numberWithCommas(roundToTwo(result)));
	     var result = parseFloat($('.btc-total').text()) * parseFloat(value);
	     $('.usd-total').html(numberWithCommas(roundToTwo(result)));
	     var d = new Date();
	     $('#timestamp').html(d.toUTCString());
	 };

	 $(document).ready(function() {
	     update();
	 });

	 function roundToTwo(num) {    
	     return +(Math.round(num + "e+2")  + "e-2");
	 }

	 function numberWithCommas(x) {
	     return x.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
	 }
	</script>
    </body>
</html>
